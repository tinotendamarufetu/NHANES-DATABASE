# NHANES-DATABASE
This project aims to create a local PostgreSQL database for NHANES (National Health and Nutrition Examination Survey) data. The NHANES dataset consists of various sections, including demographics, dietary information, laboratory data, examination data, and questionnaire responses. Each section will be represented by a separate schema in the database, with each file from the corresponding section being stored as a table.

# Repository Structure
The repository is organized as follows:
1. NHANES Web Scrapper.py: This Python script scrapes the NHANES website (https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/default.aspx) to download the necessary data files in the .xpt format. The files are saved into their respective section folders.
2. xpt to csv.py: This Python script converts the downloaded .xpt files to the more accessible .csv format. It iterates through the section folders and converts each file to the corresponding .csv file.
3. csv to sql statement generation.py: This Python script generates SQL table creation statements based on the converted .csv files. It analyzes the data columns and data types in the .csv files and generates the necessary SQL statements to create tables for each file.
4. data: This folder contains the downloaded .xpt files organized by section.
5. csv: This folder contains the converted .csv files corresponding to each section.
6. sql: This folder contains the SQL table creation statements generated by the csv to sql statement generation.py script.
7. README.md: This document provides an overview of the project, instructions for setting up the database, and information on how to use the repository.

# Setup Instructions
To set up the NHANES PostgreSQL database, follow these steps:
1. Execute the following scripts in order to download, convert, and generate SQL statements:
 - Run NHANES Web Scrapper.py to download the .xpt files into the data folder.
 - Run xpt to csv.py to convert the .xpt files to .csv format and save them in the csv folder.
 - Run csv to sql statement generation.py to generate SQL table creation statements based on the converted .csv files. The SQL statements will be saved in the sql folder.
2. Create a PostgreSQL database and connect to it using your preferred PostgreSQL client.
3. Execute the SQL table creation statements from the sql folder in the following order:
 - Create the necessary schemas to represent each section (e.g., demographics, dietary, laboratory, examination, questionnaire).
 - Create tables for each .csv file, mapping them to the corresponding sections.
6. Once the tables are created, you can start querying the NHANES data using SQL.

# Acknowledgments
- The NHANES dataset is made available by the Centers for Disease Control and Prevention (CDC) and the National Center for Health Statistics (NCHS).
- This project is not officially affiliated with the CDC or NCHS, and the data should be used in accordance with their terms and conditions.

# References
NHANES website: https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/default.aspx
PostgreSQL: https://www.postgresql.org/

